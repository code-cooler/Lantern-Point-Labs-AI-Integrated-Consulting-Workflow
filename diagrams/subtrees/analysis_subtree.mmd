flowchart TD
    %% Analysis & Synthesis Subtree
    
    %% Main node connecting back to main diagram
    mainFlow(["Back to Main Flow"]) -.-> analysis[Analysis & Synthesis]
    
    %% Detailed steps within Analysis phase (limited to ~5 nodes)
    analysis --> patternIdentification[Pattern Identification]
    patternIdentification --> frameworkMapping[Framework Mapping]
    frameworkMapping --> hypothesisDevelopment[Hypothesis Development]
    
    %% AI Integration - Deep Analysis
    hypothesisDevelopment --> aiDeepAnalysis{AI Deep Analysis}
    
    %% AI provides multiple insights - link to a secondary diagram for details
    aiDeepAnalysis --> aiInsights(["View AI Analysis Details"])
    aiInsights --> humanAiCollaboration[Human-AI Collaborative Analysis]
    
    %% Human Verification of AI Analysis
    humanAiCollaboration --> aiVerification{AI insights\nvalid & useful?}
    aiVerification -->|No| hypothesisDevelopment
    aiVerification -->|Yes| insightFinalization[Finalize Key Insights]
    
    %% Return to main flow
    insightFinalization --> nextPhase(["Continue to Deliverable Production"])
    
    %% Click interactions
    click mainFlow "../index.html" "Return to main workflow"
    click nextPhase "deliverable_subtree.html" "Continue to next phase"
    click aiDeepAnalysis "#" "Purpose: Recognize complex patterns and simulate different scenarios\n\nPrompt example: 'Analyze this dataset to identify patterns that support or contradict our hypothesis about [X]. Then simulate three scenarios with different assumptions about [variables] to test the robustness of our findings.'"
    click aiInsights "analysis_ai_insights.html" "View detailed AI analysis processes"
    
    %% Detailed Styling and Classifications
    classDef phase fill:#f5f5f5,stroke:#333,stroke-width:1px;
    classDef subProcess fill:#fff8e1,stroke:#ff8f00,stroke-width:1px;
    classDef decision fill:#e1f5fe,stroke:#0277bd,stroke-width:1px;
    classDef aiDecision fill:#ede7f6,stroke:#4527a0,stroke-width:1px,stroke-dasharray: 5 2;
    classDef navigation fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px,stroke-dasharray: 3 3;
    
    %% Apply styles to nodes
    class analysis phase;
    class patternIdentification,frameworkMapping,hypothesisDevelopment,humanAiCollaboration,insightFinalization subProcess;
    class aiVerification decision;
    class aiDeepAnalysis aiDecision;
    class mainFlow,nextPhase,aiInsights navigation; 
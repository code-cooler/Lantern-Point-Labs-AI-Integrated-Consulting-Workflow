flowchart TD
    %% AI Analysis Details - A deeper subtree
    
    %% Main node connecting back to parent diagram
    parentFlow(["Back to Analysis Phase"]) -.-> aiDeepAnalysis{AI Deep Analysis}
    
    %% Three parallel AI insight processes
    aiDeepAnalysis --> patternRecognition[AI: Complex Pattern Recognition]
    aiDeepAnalysis --> scenarioSimulation[AI: Scenario Simulation]
    aiDeepAnalysis --> correlationAnalysis[AI: Correlation Analysis]
    
    %% Details for each AI process
    patternRecognition --> combineInsights[Combine AI Insights]
    scenarioSimulation --> combineInsights
    correlationAnalysis --> combineInsights
    
    %% Return to parent flow
    combineInsights --> returnToAnalysis(["Return to Collaborative Analysis"])
    
    %% Click interactions with tooltips for AI prompts
    click parentFlow "analysis_subtree.html" "Return to Analysis & Synthesis subtree"
    click returnToAnalysis "analysis_subtree.html" "Continue with collaborative analysis"
    click patternRecognition "#" "AI: Complex Pattern Recognition\n\nPurpose: Identify hidden patterns in complex datasets\n\nPrompt example: 'Using the customer engagement data from the last 18 months, identify recurring patterns in service usage that might not be immediately obvious. Group these patterns by customer segment and prioritize those with the strongest correlation to renewal rates.'"
    click scenarioSimulation "#" "AI: Scenario Simulation\n\nPurpose: Test hypotheses under different conditions\n\nPrompt example: 'Based on our hypothesis that pricing is the primary factor in customer churn, simulate three scenarios: 1) A 10% price reduction, 2) Maintaining current prices with enhanced features, and 3) Tiered pricing with more flexibility. For each scenario, project likely impact on retention, revenue, and market share over 12 months.'"
    click correlationAnalysis "#" "AI: Correlation Analysis\n\nPurpose: Discover relationships between variables\n\nPrompt example: 'Analyze the stakeholder interview data to identify correlations between reported problems and organizational factors such as department, seniority level, and geographic location. Highlight any unexpected correlations that might provide new insights into the root causes of the reported issues.'"
    
    %% Detailed Styling
    classDef aiDecision fill:#ede7f6,stroke:#4527a0,stroke-width:1px,stroke-dasharray: 5 2;
    classDef aiInsight fill:#f3e5f5,stroke:#6a1b9a,stroke-width:1px,stroke-dasharray: 5 2;
    classDef subProcess fill:#fff8e1,stroke:#ff8f00,stroke-width:1px;
    classDef navigation fill:#e8f5e9,stroke:#2e7d32,stroke-width:1px,stroke-dasharray: 3 3;
    
    %% Apply styles to nodes
    class aiDeepAnalysis aiDecision;
    class patternRecognition,scenarioSimulation,correlationAnalysis aiInsight;
    class combineInsights subProcess;
    class parentFlow,returnToAnalysis navigation; 